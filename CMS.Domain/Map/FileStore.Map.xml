<?xml version="1.0" encoding="utf-8" ?> 
<!--============================================================================
//	CAUTION: This file is generated by IBatisNetGen.BatisMap.cst at 2011/9/14 21:40:03
//				Any manual editing will be lost in re-generation.
//===========================================================================-->
<sqlMap namespace="FileStore"
	xmlns="http://ibatis.apache.org/mapping" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<alias>
		<typeAlias alias="FileStore" type="CMS.Domain.FileStore" />
	</alias>

	<resultMaps>
		<resultMap id="FullResultMap" class="FileStore">
			<result property="ID" column="ID" dbType="BigInt"/>
			<result property="ChannelID" column="ChannelID" dbType="BigInt"/>
			<result property="DocID" column="DocID" dbType="BigInt"/>
			<result property="ExtName" column="ExtName" dbType="VarChar"/>
			<result property="LocalPath" column="LocalPath" dbType="VarChar"/>
			<result property="URL" column="URL" dbType="VarChar"/>
			<result property="FileSize" column="FileSize" dbType="Int"/>
			<result property="Md5" column="md5" dbType="VarChar"/>
			<result property="CreateTime" column="CreateTime" dbType="DateTime"/>
      <result property="PublicTime" column="PublicTime" dbType="DateTime"/>
			<result property="CreateUserID" column="CreateUserID" dbType="BigInt"/>
		</resultMap>
	</resultMaps>
	
	<statements>

		<select id="GetCount" resultClass="System.Int32">
			SELECT count(*) FROM [dbo].[FileStore]
		</select>
		
		<select id="FindAll" resultMap="FullResultMap">
			SELECT * 
			FROM [dbo].[FileStore]
		</select>
		
		<select id="Find" parameterClass="FileStore" resultMap="FullResultMap" extends="FindAll">
			WHERE
				([FileStore].[ID] = #ID,dbType=BigInt#)
		</select>
		
		<select id="FindByChannelID" parameterClass="Int64" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[ChannelID] = #value#)
		</select>
		<select id="FindByDocID" parameterClass="Int64" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[DocID] = #value#)
		</select>
		<select id="FindByExtName" parameterClass="String" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[ExtName] = #value#)
		</select>
		<select id="FindByLocalPath" parameterClass="String" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[LocalPath] = #value#)
		</select>
		<select id="FindByURL" parameterClass="String" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[URL] = #value#)
		</select>
		<select id="FindByFileSize" parameterClass="Int32" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[FileSize] = #value#)
		</select>
		<select id="FindByMd5" parameterClass="String" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[md5] = #value#)
		</select>
		<select id="FindByCreateTime" parameterClass="DateTime" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[CreateTime] = #value#)
		</select>
		<select id="FindByCreateUserID" parameterClass="Int64" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[CreateUserID] = #value#)
		</select>
		
		<insert id="Insert" parameterClass="FileStore">
			INSERT INTO [dbo].[FileStore] (
				 [ChannelID]
				, [DocID]
				, [ExtName]
				, [LocalPath]
				, [URL]
				, [FileSize]
				, [md5]
				, [CreateTime]
				, [CreateUserID]
			) VALUES (
        #ChannelID,dbType=BigInt#
				, #DocID,dbType=BigInt#
				, #ExtName,dbType=VarChar#
				, #LocalPath,dbType=VarChar#
				, #URL,dbType=VarChar#
				, #FileSize,dbType=Int#
				, #Md5,dbType=VarChar#
				, #CreateTime,dbType=DateTime#
				, #CreateUserID,dbType=BigInt#
			)
		</insert>

		<update id="Update" parameterClass="FileStore">
			UPDATE [dbo].[FileStore] SET
				 [ChannelID] = #ChannelID,dbType=BigInt#
				, [DocID] = #DocID,dbType=BigInt#
				, [ExtName] = #ExtName,dbType=VarChar#
				, [LocalPath] = #LocalPath,dbType=VarChar#
				, [URL] = #URL,dbType=VarChar#
				, [FileSize] = #FileSize,dbType=Int#
				, [md5] = #Md5,dbType=VarChar#
				, [CreateTime] = #CreateTime,dbType=DateTime#
				, [CreateUserID] = #CreateUserID,dbType=BigInt#
			WHERE
				([ID] = #ID,dbType=BigInt#)
		</update>

    <update id="UpdateLocalPath" parameterClass="Hashtable">
      UPDATE [dbo].[FileStore] SET
      [LocalPath] = '$newpath$'
      , [URL] ='$url$'
      WHERE
      ([LocalPath] = '$oldpath$')
    </update>

    <update id="UpdatePublicTime" parameterClass="Hashtable">
      UPDATE [dbo].[FileStore] SET
      [PublicTime] = '$PublicTime$'
      WHERE
      ([LocalPath] = '$LocalPath$')
    </update>

		<delete id="Delete" parameterClass="FileStore">
			DELETE FROM [dbo].[FileStore]
			WHERE
				([ID] = #ID,dbType=BigInt#)
		</delete>

		<delete id="DeleteByChannelID" parameterClass="Int64">
			DELETE FROM [dbo].[FileStore] WHERE ([ChannelID] = #value#)
		</delete>
		<delete id="DeleteByDocID" parameterClass="Int64">
			DELETE FROM [dbo].[FileStore] WHERE ([DocID] = #value#)
		</delete>
		<delete id="DeleteByExtName" parameterClass="String">
			DELETE FROM [dbo].[FileStore] WHERE ([ExtName] = #value#)
		</delete>
		<delete id="DeleteByLocalPath" parameterClass="String">
			DELETE FROM [dbo].[FileStore] WHERE ([LocalPath] = #value#)
		</delete>
		<delete id="DeleteByURL" parameterClass="String">
			DELETE FROM [dbo].[FileStore] WHERE ([URL] = #value#)
		</delete>
		<delete id="DeleteByFileSize" parameterClass="Int32">
			DELETE FROM [dbo].[FileStore] WHERE ([FileSize] = #value#)
		</delete>
		<delete id="DeleteByMd5" parameterClass="String">
			DELETE FROM [dbo].[FileStore] WHERE ([md5] = #value#)
		</delete>
		<delete id="DeleteByCreateTime" parameterClass="DateTime">
			DELETE FROM [dbo].[FileStore] WHERE ([CreateTime] = #value#)
		</delete>
		<delete id="DeleteByCreateUserID" parameterClass="Int64">
			DELETE FROM [dbo].[FileStore] WHERE ([CreateUserID] = #value#)
		</delete>
		
		<select id="Reload" parameterClass="FileStore" resultMap="FullResultMap" extends="FindAll">
			WHERE ([FileStore].[ID] = #ID,dbType=BigInt#)
		</select>
	</statements>
</sqlMap>
